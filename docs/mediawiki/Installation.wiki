= Установка и настройка =

== Требования к системе ==

=== Минимальные требования ===
* '''CPU''': 4 cores
* '''RAM''': 8 GB
* '''Disk''': 50 GB SSD
* '''OS''': Ubuntu 20.04+ / CentOS 8+ / macOS / Windows 10+

=== Рекомендуемые требования (Production) ===
* '''CPU''': 8+ cores
* '''RAM''': 16+ GB
* '''Disk''': 200+ GB SSD
* '''OS''': Ubuntu 22.04 LTS

== Необходимое ПО ==

* [https://docs.docker.com/get-docker/ Docker] 24.0+
* [https://docs.docker.com/compose/install/ Docker Compose] 2.0+
* [https://git-scm.com/downloads Git]
* [https://nodejs.org/ Node.js] 18+ (для frontend разработки)
* [https://www.python.org/ Python] 3.11+ (для backend разработки)

----

== Быстрый старт ==

=== 1. Клонирование репозитория ===

<syntaxhighlight lang="bash">
git clone https://github.com/azlamire/Leams.git
cd Leams
</syntaxhighlight>

=== 2. Настройка переменных окружения ===

<syntaxhighlight lang="bash">
# Копирование примера конфигурации
cp .env.example .env

# Редактирование файла с вашими настройками
nano .env
</syntaxhighlight>

'''Основные переменные окружения:'''

<syntaxhighlight lang="bash">
# Database
DATABASE_URL=postgresql://user:password@localhost:5432/leams
POSTGRES_USER=leams_user
POSTGRES_PASSWORD=secure_password
POSTGRES_DB=leams

# Redis
REDIS_URL=redis://localhost:6379/0

# S3 Storage
S3_ENDPOINT=http://minio:9000
S3_ACCESS_KEY=minioadmin
S3_SECRET_KEY=minioadmin
S3_BUCKET=leams-streams

# JWT Authentication
JWT_SECRET_KEY=your-secret-key-here
JWT_ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=30

# Application
BACKEND_PORT=8000
FRONTEND_PORT=3000
NODE_ENV=development
</syntaxhighlight>

=== 3. Запуск с Docker Compose ===

<syntaxhighlight lang="bash">
# Сборка образов
docker-compose build

# Запуск всех сервисов
docker-compose up -d

# Проверка статуса
docker-compose ps

# Просмотр логов
docker-compose logs -f
</syntaxhighlight>

=== 4. Инициализация базы данных ===

<syntaxhighlight lang="bash">
# Применение миграций
docker-compose exec backend alembic upgrade head

# Создание начальных данных (опционально)
docker-compose exec backend python scripts/init_db.py
</syntaxhighlight>

=== 5. Проверка работоспособности ===

После запуска сервисы будут доступны по следующим адресам:

* '''Frontend''': http://localhost:3000
* '''Backend API''': http://localhost:8000
* '''API Docs (Swagger)''': http://localhost:8000/docs
* '''ReDoc''': http://localhost:8000/redoc

Проверьте health check:
<syntaxhighlight lang="bash">
# Backend health check
curl http://localhost:8000/health

# Ожидаемый ответ
{"status": "healthy"}
</syntaxhighlight>

----

== Локальная разработка (без Docker) ==

=== Backend Setup ===

<syntaxhighlight lang="bash">
cd backend

# Создание виртуального окружения
python -m venv venv

# Активация окружения
source venv/bin/activate  # Linux/macOS
# или
venv\Scripts\activate  # Windows

# Установка зависимостей
pip install -r requirements.txt

# Запуск сервера разработки
uvicorn main:app --reload --port 8000
</syntaxhighlight>

=== Frontend Setup ===

<syntaxhighlight lang="bash">
cd frontend

# Установка зависимостей
bun install
# или
npm install

# Запуск dev сервера
bun run dev
# или
npm run dev
</syntaxhighlight>

----

== Устранение распространенных проблем ==

=== Порты уже заняты ===

Если порты 3000 или 8000 заняты, измените их в <code>.env</code>:
<syntaxhighlight lang="bash">
BACKEND_PORT=8080
FRONTEND_PORT=3001
</syntaxhighlight>

=== Проблемы с правами доступа Docker ===

<syntaxhighlight lang="bash">
# Добавление пользователя в группу docker
sudo usermod -aG docker $USER

# Перелогиньтесь для применения изменений
</syntaxhighlight>

=== Ошибки подключения к базе данных ===

Убедитесь, что PostgreSQL контейнер запущен:
<syntaxhighlight lang="bash">
docker-compose ps postgres
docker-compose logs postgres
</syntaxhighlight>

=== Проблемы с миграциями ===

<syntaxhighlight lang="bash">
# Откат последней миграции
docker-compose exec backend alembic downgrade -1

# Применение заново
docker-compose exec backend alembic upgrade head
</syntaxhighlight>

----

== Следующие шаги ==

* Ознакомьтесь с [[Backend Overview|архитектурой проекта]]
* Изучите [[API Overview|API документацию]]
* Настройте [[Streaming Setup|streaming сервер]]
* Прочитайте [[Development Guidelines|руководство по разработке]]

[[Category:Documentation]]
[[Category:Installation]]
